:root {
    --text-color-light: #3b1f1f;
    --text-color-dark: #ffe5d9;
    --border-color-light: #ffb347;
    --border-color-dark: #e17055;
    --component-bg-light: rgba(255, 204, 153, 0.6);
    --component-bg-dark: rgba(255, 94, 98, 0.6);
    --shadow-color-light: rgba(255, 94, 98, 0.1);
    --shadow-color-dark: rgba(72, 52, 212, 0.5);
    --accent-color: #ff6f61;
    --footer-bg-light: rgba(255, 183, 77, 0.85);
    --footer-bg-dark: rgba(72, 52, 212, 0.85);
    --footer-text-light: #6d4c41;
    --footer-text-dark: #ffe5d9;
}

body {
    /* ...existing code... */
    background: linear-gradient(180deg, #ffb347 0%, #ff6f61 40%, #c44569 80%, #6a89cc 100%);
    color: var(--text-color-light);
    /* ...existing code... */
}

@media (prefers-color-scheme: dark) {
    body {
        color: var(--text-color-dark);
    }
}

.block-title span {
    /* ...existing code... */
    color: white;
    text-shadow: 0 0 5px #ffe5d9, 0 0 10px #ffe5d9, 0 0 15px var(--accent-color), 0 0 20px var(--accent-color);
    /* ...existing code... */
}

.c-z1 { background-color: #ffb347; }
.c-z2 { background-color: #ff6f61; }
.c-z3 { background-color: #c44569; }
.c-e { background-color: #ffe5d9; color: #c44569; }
.c-n { background-color: #f8c291; }

.score-display {
    color: #ffb347;
    text-shadow: 0 1px 3px #c44569;
}

#highscore.pulsate {
    animation: pulsate 0.6s 3;
}

@keyframes pulsate {
    0%, 100% { transform: scale(1); color: #ffd700; }
    50% { transform: scale(1.25); color: #ffb347; }
}

#game-board {
    border: 2px solid var(--border-color-light);
    /* ...existing code... */
}

@media (prefers-color-scheme: dark) {
    #game-board { border-color: var(--border-color-dark); }
}

.cell {
    border-right: 2px solid var(--border-color-light);
    border-bottom: 2px solid var(--border-color-light);
    /* ...existing code... */
}

@media (prefers-color-scheme: dark) {
    .cell {
        border-right-color: var(--border-color-dark);
        border-bottom-color: var(--border-color-dark);
    }
}

.cell.occupied {
    border-radius: 20%;
    border: 1px solid #ffe5d9;
    box-shadow: inset 0 0 8px #ffe5d9, 0 0 10px var(--accent-color);
}

.figure-slot {
    background-color: rgba(255, 204, 153, 0.2);
    border: 2px dashed #ffb347;
}

.figure-block {
    /* ...existing code... */
    box-shadow: inset 0 0 3px #ffe5d9;
}

.donation-content {
    background-color: var(--component-bg-light);
    box-shadow: 0 5px 15px var(--shadow-color-light);
}

@media (prefers-color-scheme: dark) {
    .donation-content {
        background-color: var(--component-bg-dark);
    }
}

.paypal-link { color: var(--accent-color); }

footer {
    background-color: var(--footer-bg-light);
    border-top: 1px solid var(--border-color-light);
    color: var(--footer-text-light);
}

footer a {
    color: var(--footer-text-light);
}

@media (prefers-color-scheme: dark) {
    footer {
        background-color: var(--footer-bg-dark);
        border-top: 1px solid var(--border-color-dark);
        color: var(--footer-text-dark);
    }
    footer a {
        color: var(--footer-text-dark);
    }
}

.cell.preview {
    box-shadow: 0 0 10px var(--accent-color), 0 0 20px #ffe5d9;
    border: 2px solid var(--accent-color);
}
.cell.preview.invalid {
    background-color: rgba(255, 94, 98, 0.7) !important;
    border: 2px solid #c44569;
    box-shadow: 0 0 10px #c44569, 0 0 20px #ffe5d9;
}

.score-animation {
    color: var(--accent-color);
    text-shadow: 0 0 10px #ffe5d9;
}